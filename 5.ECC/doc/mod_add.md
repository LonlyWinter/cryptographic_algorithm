# 模加法（mod_add）

在 Verilog 中实现 **模加法（mod_add）** 是 ECC（椭圆曲线密码）硬件设计的基础模块之一。模加的定义是：

$$
c = (a + b) \bmod p
$$

其中 $ a, b, p $ 都是非负整数，且通常 $ 0 \leq a, b < p $，$ p $ 是一个素数（如 secp256k1 中的 $ p = 2^{256} - 2^{32} - 977 $）。


### 模加的关键点：
- 如果 $ a + b < p $，结果就是 $ a + b $
- 如果 $ a + b \geq p $，结果就是 $ a + b - p $
- 因为 $ a, b < p $，所以 $ a + b < 2p $，最多只需减一次 $ p $

因此，模加可以用 **一次加法 + 一次条件减法** 实现，无需除法！

### 说明

- **输入要求**：`a` 和 `b` 必须满足 $ 0 \leq a, b < p $，这是 ECC 运算中的标准前提。
- **输出范围**：结果 `c` 也满足 $ 0 \leq c < p $。
- **效率**：仅需一个加法器、一个减法器和一个比较器，非常适合 FPGA/ASIC 实现。
- **无时钟**：这是一个纯组合逻辑模块（无寄存器），可嵌入到更大的数据通路中。



### 在 ECC 点加中的用途

在点加公式中，模加用于：
- 计算 $ x_3 = \lambda^2 - x_1 - x_2 \mod p $ → 可拆解为多次 mod_sub / mod_add
- 处理中间结果，确保所有值保持在 $ [0, p) $ 范围内

